local function Updater()
    local connection
    connection = game:GetService("RunService").RenderStepped:Connect(function()
        if plr.Character and plr.Character:FindFirstChild("Humanoid") and plr.Character:FindFirstChild("HumanoidRootPart") then
            local humanoid = plr.Character.Humanoid
            local HumPos, OnScreen = camera:WorldToViewportPoint(plr.Character.HumanoidRootPart.Position)
            if OnScreen then
                local healthRatio = humanoid.Health / humanoid.MaxHealth

                -- Solo actualizar el color de la barra de salud si está activa
                if Settings.healthbar then
                    UpdateColor(healthRatio)  -- Muestra la barra de salud si healthbar está activado
                else
                    Visibility(false, library) -- Oculta la barra de salud si healthbar está desactivado
                end

                -- Tu lógica adicional para la silueta del personaje
                -- ...
                
                Visibility(true, library) -- Asegura que el contorno esté visible cuando esté en pantalla
            else
                Visibility(false, library)
            end
        else
            Visibility(false, library)
            if not game.Players:FindFirstChild(plr.Name) then
                connection:Disconnect()
            end
        end
    end)
end
